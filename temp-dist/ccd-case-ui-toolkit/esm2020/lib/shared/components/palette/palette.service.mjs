import { Injectable } from '@angular/core';
import { DisplayContextCustomParameter, DisplayContextParameter } from '../../domain/definition/display-context-enum.model';
import { WriteAddressFieldComponent } from './address/write-address-field.component';
import { CaseFileViewFieldComponent } from './case-file-view/case-file-view-field.component';
import { ReadCaseFlagFieldComponent } from './case-flag/read-case-flag-field.component';
import { WriteCaseFlagFieldComponent } from './case-flag/write-case-flag-field.component';
import { ReadCaseLinkFieldComponent } from './case-link/read-case-link-field.component';
import { WriteCaseLinkFieldComponent } from './case-link/write-case-link-field.component';
import { ReadCollectionFieldComponent } from './collection/read-collection-field.component';
import { WriteCollectionFieldComponent } from './collection/write-collection-field.component';
import { ReadComplexFieldComponent } from './complex/read-complex-field.component';
import { WriteComplexFieldComponent } from './complex/write-complex-field.component';
import { ReadDateFieldComponent } from './date/read-date-field.component';
import { WriteDateContainerFieldComponent } from './date/write-date-container-field.component';
import { ReadDocumentFieldComponent } from './document/read-document-field.component';
import { WriteDocumentFieldComponent } from './document/write-document-field.component';
import { ReadDynamicListFieldComponent } from './dynamic-list/read-dynamic-list-field.component';
import { WriteDynamicListFieldComponent } from './dynamic-list/write-dynamic-list-field.component';
import { ReadDynamicMultiSelectListFieldComponent, WriteDynamicMultiSelectListFieldComponent } from './dynamic-multi-select-list';
import { ReadDynamicRadioListFieldComponent } from './dynamic-radio-list/read-dynamic-radio-list-field.component';
import { WriteDynamicRadioListFieldComponent } from './dynamic-radio-list/write-dynamic-radio-list-field.component';
import { ReadEmailFieldComponent } from './email/read-email-field.component';
import { WriteEmailFieldComponent } from './email/write-email-field.component';
import { ReadFixedListFieldComponent } from './fixed-list/read-fixed-list-field.component';
import { WriteFixedListFieldComponent } from './fixed-list/write-fixed-list-field.component';
import { ReadFixedRadioListFieldComponent } from './fixed-radio-list/read-fixed-radio-list-field.component';
import { WriteFixedRadioListFieldComponent } from './fixed-radio-list/write-fixed-radio-list-field.component';
import { CaseHistoryViewerFieldComponent } from './history/case-history-viewer-field.component';
import { ReadJudicialUserFieldComponent } from './judicial-user/read-judicial-user-field.component';
import { WriteJudicialUserFieldComponent } from './judicial-user/write-judicial-user-field.component';
import { LabelFieldComponent } from './label/label-field.component';
import { ReadLinkedCasesFieldComponent, WriteLinkedCasesFieldComponent } from './linked-cases';
import { ReadMoneyGbpFieldComponent } from './money-gbp/read-money-gbp-field.component';
import { WriteMoneyGbpFieldComponent } from './money-gbp/write-money-gbp-field.component';
import { ReadMultiSelectListFieldComponent } from './multi-select-list/read-multi-select-list-field.component';
import { WriteMultiSelectListFieldComponent } from './multi-select-list/write-multi-select-list-field.component';
import { ReadNumberFieldComponent } from './number/read-number-field.component';
import { WriteNumberFieldComponent } from './number/write-number-field.component';
import { ReadOrderSummaryFieldComponent } from './order-summary/read-order-summary-field.component';
import { WriteOrderSummaryFieldComponent } from './order-summary/write-order-summary-field.component';
import { ReadOrganisationFieldComponent } from './organisation/read-organisation-field.component';
import { WriteOrganisationFieldComponent } from './organisation/write-organisation-field.component';
import { CasePaymentHistoryViewerFieldComponent } from './payment/case-payment-history-viewer-field.component';
import { ReadPhoneUKFieldComponent } from './phone-uk/read-phone-uk-field.component';
import { WritePhoneUKFieldComponent } from './phone-uk/write-phone-uk-field.component';
import { ReadTextAreaFieldComponent } from './text-area/read-text-area-field.component';
import { WriteTextAreaFieldComponent } from './text-area/write-text-area-field.component';
import { ReadTextFieldComponent } from './text/read-text-field.component';
import { WriteTextFieldComponent } from './text/write-text-field.component';
import { UnsupportedFieldComponent } from './unsupported-field.component';
import { WaysToPayFieldComponent } from './waystopay/waystopay-field.component';
import { ReadYesNoFieldComponent } from './yes-no/read-yes-no-field.component';
import { WriteYesNoFieldComponent } from './yes-no/write-yes-no-field.component';
import * as i0 from "@angular/core";
export class PaletteService {
    constructor() {
        this.componentLauncherRegistry = {
            [DisplayContextCustomParameter.CaseFileView]: [CaseFileViewFieldComponent, CaseFileViewFieldComponent],
            [DisplayContextCustomParameter.LinkedCases]: [WriteLinkedCasesFieldComponent, ReadLinkedCasesFieldComponent]
        };
    }
    getFieldComponentClass(caseField, write) {
        switch (caseField.field_type.type) {
            case 'Text':
            case 'Postcode':
                return write ? WriteTextFieldComponent : ReadTextFieldComponent;
            case 'TextArea':
                return write ? WriteTextAreaFieldComponent : ReadTextAreaFieldComponent;
            case 'Number':
                return write ? WriteNumberFieldComponent : ReadNumberFieldComponent;
            case 'YesOrNo':
                return write ? WriteYesNoFieldComponent : ReadYesNoFieldComponent;
            case 'Email':
                return write ? WriteEmailFieldComponent : ReadEmailFieldComponent;
            case 'PhoneUK':
                return write ? WritePhoneUKFieldComponent : ReadPhoneUKFieldComponent;
            case 'Date':
            case 'DateTime':
                return write ? WriteDateContainerFieldComponent : ReadDateFieldComponent;
            case 'MoneyGBP':
                return write ? WriteMoneyGbpFieldComponent : ReadMoneyGbpFieldComponent;
            case 'DynamicList':
                return write ? WriteDynamicListFieldComponent : ReadDynamicListFieldComponent;
            case 'FixedList':
                return write ? WriteFixedListFieldComponent : ReadFixedListFieldComponent;
            case 'DynamicRadioList':
                return write ? WriteDynamicRadioListFieldComponent : ReadDynamicRadioListFieldComponent;
            case 'DynamicMultiSelectList':
                return write ? WriteDynamicMultiSelectListFieldComponent : ReadDynamicMultiSelectListFieldComponent;
            case 'FixedRadioList':
                return write ? WriteFixedRadioListFieldComponent : ReadFixedRadioListFieldComponent;
            case 'Complex':
                switch (caseField.field_type.id) {
                    case 'AddressGlobalUK':
                    case 'AddressUK':
                        return write ? WriteAddressFieldComponent : ReadComplexFieldComponent;
                    case 'OrderSummary':
                        return write ? WriteOrderSummaryFieldComponent : ReadOrderSummaryFieldComponent;
                    case 'CaseLink':
                        return write ? WriteCaseLinkFieldComponent : ReadCaseLinkFieldComponent;
                    case 'Organisation':
                        return write ? WriteOrganisationFieldComponent : ReadOrganisationFieldComponent;
                    case 'JudicialUser':
                        return write ? WriteJudicialUserFieldComponent : ReadJudicialUserFieldComponent;
                    default:
                        return write ? WriteComplexFieldComponent : ReadComplexFieldComponent;
                }
            case 'Collection':
                return write ? WriteCollectionFieldComponent : ReadCollectionFieldComponent;
            case 'MultiSelectList':
                return write ? WriteMultiSelectListFieldComponent : ReadMultiSelectListFieldComponent;
            case 'Document':
                return write ? WriteDocumentFieldComponent : ReadDocumentFieldComponent;
            case 'Label':
                return LabelFieldComponent;
            case 'CasePaymentHistoryViewer':
                return CasePaymentHistoryViewerFieldComponent;
            case 'CaseHistoryViewer':
                return CaseHistoryViewerFieldComponent;
            case 'WaysToPay':
                return WaysToPayFieldComponent;
            case 'ComponentLauncher':
                return this.getComponentLauncherComponent(caseField, write);
            case 'FlagLauncher':
                return write ? WriteCaseFlagFieldComponent : ReadCaseFlagFieldComponent;
            default:
                return UnsupportedFieldComponent;
        }
    }
    getComponentLauncherComponent(caseField, write) {
        // Extract the value passed for #ARGUMENT(...) in the CaseField display_context_parameter and
        // delete the default entries and return the matching component from the componentLauncherRegistry
        const argumentValue = caseField?.display_context_parameter?.match(/#ARGUMENT\((.*?)\)/)[1];
        if (argumentValue) {
            const displayContextParameterArray = argumentValue.includes(',') ? argumentValue.split(',') : [argumentValue];
            const componentToRender = displayContextParameterArray.filter(displayContextParameter => {
                return !Object.values(DisplayContextParameter).find(displayContextParameterFromLookup => {
                    return displayContextParameter === displayContextParameterFromLookup;
                });
            });
            if (componentToRender?.length > 0 && this.componentLauncherRegistry.hasOwnProperty(componentToRender[0])) {
                return this.componentLauncherRegistry[componentToRender[0]][write ? 0 : 1];
            }
        }
        return UnsupportedFieldComponent;
    }
}
PaletteService.ɵfac = function PaletteService_Factory(t) { return new (t || PaletteService)(); };
PaletteService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: PaletteService, factory: PaletteService.ɵfac });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PaletteService, [{
        type: Injectable
    }], null, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFsZXR0ZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY2NkLWNhc2UtdWktdG9vbGtpdC9zcmMvbGliL3NoYXJlZC9jb21wb25lbnRzL3BhbGV0dGUvcGFsZXR0ZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQVEsTUFBTSxlQUFlLENBQUM7QUFFakQsT0FBTyxFQUFFLDZCQUE2QixFQUFFLHVCQUF1QixFQUFFLE1BQU0sb0RBQW9ELENBQUM7QUFDNUgsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDckYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0saURBQWlELENBQUM7QUFDN0YsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDeEYsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFDMUYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDeEYsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFDMUYsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sOENBQThDLENBQUM7QUFDNUYsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sK0NBQStDLENBQUM7QUFDOUYsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDbkYsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDckYsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDMUUsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFDL0YsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFDdEYsT0FBTyxFQUFFLDJCQUEy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Q0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQzlHLE1BQU0saUJBQWlCLEdBQUcsNEJBQTRCLENBQUMsTUFBTSxDQUFDLHVCQUF1QixDQUFDLEVBQUU7Z0JBQ3RGLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLHVCQUF1QixDQUFDLENBQUMsSUFBSSxDQUFDLGlDQUFpQyxDQUFDLEVBQUU7b0JBQ3JGLE9BQU8sdUJBQXVCLEtBQUssaUNBQWlDLENBQUM7Z0JBQ3hFLENBQUMsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLGlCQUFpQixFQUFFLE1BQU0sR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLHlCQUF5QixDQUFDLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUN4RyxPQUFPLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUM1RTtTQUNGO1FBQ0QsT0FBTyx5QkFBeUIsQ0FBQztJQUNuQyxDQUFDOzs0RUEzRlUsY0FBYztvRUFBZCxjQUFjLFdBQWQsY0FBYzt1RkFBZCxjQUFjO2NBRDFCLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDYXNlRmllbGQgfSBmcm9tICcuLi8uLi9kb21haW4vZGVmaW5pdGlvbi9jYXNlLWZpZWxkLm1vZGVsJztcbmltcG9ydCB7IERpc3BsYXlDb250ZXh0Q3VzdG9tUGFyYW1ldGVyLCBEaXNwbGF5Q29udGV4dFBhcmFtZXRlciB9IGZyb20gJy4uLy4uL2RvbWFpbi9kZWZpbml0aW9uL2Rpc3BsYXktY29udGV4dC1lbnVtLm1vZGVsJztcbmltcG9ydCB7IFdyaXRlQWRkcmVzc0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9hZGRyZXNzL3dyaXRlLWFkZHJlc3MtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IENhc2VGaWxlVmlld0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9jYXNlLWZpbGUtdmlldy9jYXNlLWZpbGUtdmlldy1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUmVhZENhc2VGbGFnRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2Nhc2UtZmxhZy9yZWFkLWNhc2UtZmxhZy1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVDYXNlRmxhZ0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9jYXNlLWZsYWcvd3JpdGUtY2FzZS1mbGFnLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkQ2FzZUxpbmtGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vY2FzZS1saW5rL3JlYWQtY2FzZS1saW5rLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZUNhc2VMaW5rRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2Nhc2UtbGluay93cml0ZS1jYXNlLWxpbmstZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRDb2xsZWN0aW9uRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2NvbGxlY3Rpb24vcmVhZC1jb2xsZWN0aW9uLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZUNvbGxlY3Rpb25GaWVsZENvbXBvbmVudCB9IGZyb20gJy4vY29sbGVjdGlvbi93cml0ZS1jb2xsZWN0aW9uLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkQ29tcGxleEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wbGV4L3JlYWQtY29tcGxleC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVDb21wbGV4RmllbGRDb21wb25lbnQgfSBmcm9tICcuL2NvbXBsZXgvd3JpdGUtY29tcGxleC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUmVhZERhdGVGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZGF0ZS9yZWFkLWRhdGUtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdyaXRlRGF0ZUNvbnRhaW5lckZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9kYXRlL3dyaXRlLWRhdGUtY29udGFpbmVyLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkRG9jdW1lbnRGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZG9jdW1lbnQvcmVhZC1kb2N1bWVudC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVEb2N1bWVudEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9kb2N1bWVudC93cml0ZS1kb2N1bWVudC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUmVhZER5bmFtaWNMaXN0RmllbGRDb21wb25lbnQgfSBmcm9tICcuL2R5bmFtaWMtbGlzdC9yZWFkLWR5bmFtaWMtbGlzdC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVEeW5hbWljTGlzdEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9keW5hbWljLWxpc3Qvd3JpdGUtZHluYW1pYy1saXN0LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkRHluYW1pY011bHRpU2VsZWN0TGlzdEZpZWxkQ29tcG9uZW50LCBXcml0ZUR5bmFtaWNNdWx0aVNlbGVjdExpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZHluYW1pYy1tdWx0aS1zZWxlY3QtbGlzdCc7XG5pbXBvcnQgeyBSZWFkRHluYW1pY1JhZGlvTGlzdEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9keW5hbWljLXJhZGlvLWxpc3QvcmVhZC1keW5hbWljLXJhZGlvLWxpc3QtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdyaXRlRHluYW1pY1JhZGlvTGlzdEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9keW5hbWljLXJhZGlvLWxpc3Qvd3JpdGUtZHluYW1pYy1yYWRpby1saXN0LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkRW1haWxGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZW1haWwvcmVhZC1lbWFpbC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVFbWFpbEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9lbWFpbC93cml0ZS1lbWFpbC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUmVhZEZpeGVkTGlzdEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9maXhlZC1saXN0L3JlYWQtZml4ZWQtbGlzdC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVGaXhlZExpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZml4ZWQtbGlzdC93cml0ZS1maXhlZC1saXN0LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkRml4ZWRSYWRpb0xpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZml4ZWQtcmFkaW8tbGlzdC9yZWFkLWZpeGVkLXJhZGlvLWxpc3QtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdyaXRlRml4ZWRSYWRpb0xpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vZml4ZWQtcmFkaW8tbGlzdC93cml0ZS1maXhlZC1yYWRpby1saXN0LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBDYXNlSGlzdG9yeVZpZXdlckZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9oaXN0b3J5L2Nhc2UtaGlzdG9yeS12aWV3ZXItZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRKdWRpY2lhbFVzZXJGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vanVkaWNpYWwtdXNlci9yZWFkLWp1ZGljaWFsLXVzZXItZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdyaXRlSnVkaWNpYWxVc2VyRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2p1ZGljaWFsLXVzZXIvd3JpdGUtanVkaWNpYWwtdXNlci1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgTGFiZWxGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vbGFiZWwvbGFiZWwtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRMaW5rZWRDYXNlc0ZpZWxkQ29tcG9uZW50LCBXcml0ZUxpbmtlZENhc2VzRmllbGRDb21wb25lbnQgfSBmcm9tICcuL2xpbmtlZC1jYXNlcyc7XG5pbXBvcnQgeyBSZWFkTW9uZXlHYnBGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vbW9uZXktZ2JwL3JlYWQtbW9uZXktZ2JwLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZU1vbmV5R2JwRmllbGRDb21wb25lbnQgfSBmcm9tICcuL21vbmV5LWdicC93cml0ZS1tb25leS1nYnAtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRNdWx0aVNlbGVjdExpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vbXVsdGktc2VsZWN0LWxpc3QvcmVhZC1tdWx0aS1zZWxlY3QtbGlzdC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVNdWx0aVNlbGVjdExpc3RGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vbXVsdGktc2VsZWN0LWxpc3Qvd3JpdGUtbXVsdGktc2VsZWN0LWxpc3QtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWROdW1iZXJGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vbnVtYmVyL3JlYWQtbnVtYmVyLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZU51bWJlckZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9udW1iZXIvd3JpdGUtbnVtYmVyLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkT3JkZXJTdW1tYXJ5RmllbGRDb21wb25lbnQgfSBmcm9tICcuL29yZGVyLXN1bW1hcnkvcmVhZC1vcmRlci1zdW1tYXJ5LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZU9yZGVyU3VtbWFyeUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9vcmRlci1zdW1tYXJ5L3dyaXRlLW9yZGVyLXN1bW1hcnktZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRPcmdhbmlzYXRpb25GaWVsZENvbXBvbmVudCB9IGZyb20gJy4vb3JnYW5pc2F0aW9uL3JlYWQtb3JnYW5pc2F0aW9uLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZU9yZ2FuaXNhdGlvbkZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9vcmdhbmlzYXRpb24vd3JpdGUtb3JnYW5pc2F0aW9uLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBDYXNlUGF5bWVudEhpc3RvcnlWaWV3ZXJGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vcGF5bWVudC9jYXNlLXBheW1lbnQtaGlzdG9yeS12aWV3ZXItZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFJlYWRQaG9uZVVLRmllbGRDb21wb25lbnQgfSBmcm9tICcuL3Bob25lLXVrL3JlYWQtcGhvbmUtdWstZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdyaXRlUGhvbmVVS0ZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi9waG9uZS11ay93cml0ZS1waG9uZS11ay1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgUmVhZFRleHRBcmVhRmllbGRDb21wb25lbnQgfSBmcm9tICcuL3RleHQtYXJlYS9yZWFkLXRleHQtYXJlYS1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVUZXh0QXJlYUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi90ZXh0LWFyZWEvd3JpdGUtdGV4dC1hcmVhLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkVGV4dEZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi90ZXh0L3JlYWQtdGV4dC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgV3JpdGVUZXh0RmllbGRDb21wb25lbnQgfSBmcm9tICcuL3RleHQvd3JpdGUtdGV4dC1maWVsZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgVW5zdXBwb3J0ZWRGaWVsZENvbXBvbmVudCB9IGZyb20gJy4vdW5zdXBwb3J0ZWQtZmllbGQuY29tcG9uZW50JztcbmltcG9ydCB7IFdheXNUb1BheUZpZWxkQ29tcG9uZW50IH0gZnJvbSAnLi93YXlzdG9wYXkvd2F5c3RvcGF5LWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBSZWFkWWVzTm9GaWVsZENvbXBvbmVudCB9IGZyb20gJy4veWVzLW5vL3JlYWQteWVzLW5vLWZpZWxkLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXcml0ZVllc05vRmllbGRDb21wb25lbnQgfSBmcm9tICcuL3llcy1uby93cml0ZS15ZXMtbm8tZmllbGQuY29tcG9uZW50JztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFBhbGV0dGVTZXJ2aWNlIHtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wb25lbnRMYXVuY2hlclJlZ2lzdHJ5ID0ge1xuICAgIFtEaXNwbGF5Q29udGV4dEN1c3RvbVBhcmFtZXRlci5DYXNlRmlsZVZpZXddOiBbQ2FzZUZpbGVWaWV3RmllbGRDb21wb25lbnQsIENhc2VGaWxlVmlld0ZpZWxkQ29tcG9uZW50XSxcbiAgICBbRGlzcGxheUNvbnRleHRDdXN0b21QYXJhbWV0ZXIuTGlua2VkQ2FzZXNdOiBbV3JpdGVMaW5rZWRDYXNlc0ZpZWxkQ29tcG9uZW50LCBSZWFkTGlua2VkQ2FzZXNGaWVsZENvbXBvbmVudF1cbiAgfTtcblxuICBwdWJsaWMgZ2V0RmllbGRDb21wb25lbnRDbGFzcyhjYXNlRmllbGQ6IENhc2VGaWVsZCwgd3JpdGU6IGJvb2xlYW4pOiBUeXBlPHt9PiB7XG4gICAgc3dpdGNoIChjYXNlRmllbGQuZmllbGRfdHlwZS50eXBlKSB7XG4gICAgICBjYXNlICdUZXh0JzpcbiAgICAgIGNhc2UgJ1Bvc3Rjb2RlJzpcbiAgICAgICAgcmV0dXJuIHdyaXRlID8gV3JpdGVUZXh0RmllbGRDb21wb25lbnQgOiBSZWFkVGV4dEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnVGV4dEFyZWEnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZVRleHRBcmVhRmllbGRDb21wb25lbnQgOiBSZWFkVGV4dEFyZWFGaWVsZENvbXBvbmVudDtcbiAgICAgIGNhc2UgJ051bWJlcic6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlTnVtYmVyRmllbGRDb21wb25lbnQgOiBSZWFkTnVtYmVyRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdZZXNPck5vJzpcbiAgICAgICAgcmV0dXJuIHdyaXRlID8gV3JpdGVZZXNOb0ZpZWxkQ29tcG9uZW50IDogUmVhZFllc05vRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdFbWFpbCc6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlRW1haWxGaWVsZENvbXBvbmVudCA6IFJlYWRFbWFpbEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnUGhvbmVVSyc6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlUGhvbmVVS0ZpZWxkQ29tcG9uZW50IDogUmVhZFBob25lVUtGaWVsZENvbXBvbmVudDtcbiAgICAgIGNhc2UgJ0RhdGUnOlxuICAgICAgY2FzZSAnRGF0ZVRpbWUnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZURhdGVDb250YWluZXJGaWVsZENvbXBvbmVudCA6IFJlYWREYXRlRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdNb25leUdCUCc6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlTW9uZXlHYnBGaWVsZENvbXBvbmVudCA6IFJlYWRNb25leUdicEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnRHluYW1pY0xpc3QnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZUR5bmFtaWNMaXN0RmllbGRDb21wb25lbnQgOiBSZWFkRHluYW1pY0xpc3RGaWVsZENvbXBvbmVudDtcbiAgICAgIGNhc2UgJ0ZpeGVkTGlzdCc6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlRml4ZWRMaXN0RmllbGRDb21wb25lbnQgOiBSZWFkRml4ZWRMaXN0RmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdEeW5hbWljUmFkaW9MaXN0JzpcbiAgICAgICAgcmV0dXJuIHdyaXRlID8gV3JpdGVEeW5hbWljUmFkaW9MaXN0RmllbGRDb21wb25lbnQgOiBSZWFkRHluYW1pY1JhZGlvTGlzdEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnRHluYW1pY011bHRpU2VsZWN0TGlzdCc6XG4gICAgICAgICAgcmV0dXJuIHdyaXRlID8gV3JpdGVEeW5hbWljTXVsdGlTZWxlY3RMaXN0RmllbGRDb21wb25lbnQgOiBSZWFkRHluYW1pY011bHRpU2VsZWN0TGlzdEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnRml4ZWRSYWRpb0xpc3QnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZUZpeGVkUmFkaW9MaXN0RmllbGRDb21wb25lbnQgOiBSZWFkRml4ZWRSYWRpb0xpc3RGaWVsZENvbXBvbmVudDtcbiAgICAgIGNhc2UgJ0NvbXBsZXgnOlxuICAgICAgICBzd2l0Y2ggKGNhc2VGaWVsZC5maWVsZF90eXBlLmlkKSB7XG4gICAgICAgICAgY2FzZSAnQWRkcmVzc0dsb2JhbFVLJzpcbiAgICAgICAgICBjYXNlICdBZGRyZXNzVUsnOlxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlID8gV3JpdGVBZGRyZXNzRmllbGRDb21wb25lbnQgOiBSZWFkQ29tcGxleEZpZWxkQ29tcG9uZW50O1xuICAgICAgICAgIGNhc2UgJ09yZGVyU3VtbWFyeSc6XG4gICAgICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZU9yZGVyU3VtbWFyeUZpZWxkQ29tcG9uZW50IDogUmVhZE9yZGVyU3VtbWFyeUZpZWxkQ29tcG9uZW50O1xuICAgICAgICAgIGNhc2UgJ0Nhc2VMaW5rJzpcbiAgICAgICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlQ2FzZUxpbmtGaWVsZENvbXBvbmVudCA6IFJlYWRDYXNlTGlua0ZpZWxkQ29tcG9uZW50O1xuICAgICAgICAgIGNhc2UgJ09yZ2FuaXNhdGlvbic6XG4gICAgICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZU9yZ2FuaXNhdGlvbkZpZWxkQ29tcG9uZW50IDogUmVhZE9yZ2FuaXNhdGlvbkZpZWxkQ29tcG9uZW50O1xuICAgICAgICAgIGNhc2UgJ0p1ZGljaWFsVXNlcic6XG4gICAgICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZUp1ZGljaWFsVXNlckZpZWxkQ29tcG9uZW50IDogUmVhZEp1ZGljaWFsVXNlckZpZWxkQ29tcG9uZW50O1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZUNvbXBsZXhGaWVsZENvbXBvbmVudCA6IFJlYWRDb21wbGV4RmllbGRDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ0NvbGxlY3Rpb24nOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZUNvbGxlY3Rpb25GaWVsZENvbXBvbmVudCA6IFJlYWRDb2xsZWN0aW9uRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdNdWx0aVNlbGVjdExpc3QnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZU11bHRpU2VsZWN0TGlzdEZpZWxkQ29tcG9uZW50IDogUmVhZE11bHRpU2VsZWN0TGlzdEZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnRG9jdW1lbnQnOlxuICAgICAgICByZXR1cm4gd3JpdGUgPyBXcml0ZURvY3VtZW50RmllbGRDb21wb25lbnQgOiBSZWFkRG9jdW1lbnRGaWVsZENvbXBvbmVudDtcbiAgICAgIGNhc2UgJ0xhYmVsJzpcbiAgICAgICAgcmV0dXJuIExhYmVsRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdDYXNlUGF5bWVudEhpc3RvcnlWaWV3ZXInOlxuICAgICAgICByZXR1cm4gQ2FzZVBheW1lbnRIaXN0b3J5Vmlld2VyRmllbGRDb21wb25lbnQ7XG4gICAgICBjYXNlICdDYXNlSGlzdG9yeVZpZXdlcic6XG4gICAgICAgIHJldHVybiBDYXNlSGlzdG9yeVZpZXdlckZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnV2F5c1RvUGF5JzpcbiAgICAgICAgcmV0dXJuIFdheXNUb1BheUZpZWxkQ29tcG9uZW50O1xuICAgICAgY2FzZSAnQ29tcG9uZW50TGF1bmNoZXInOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb21wb25lbnRMYXVuY2hlckNvbXBvbmVudChjYXNlRmllbGQsIHdyaXRlKTtcbiAgICAgIGNhc2UgJ0ZsYWdMYXVuY2hlcic6XG4gICAgICAgIHJldHVybiB3cml0ZSA/IFdyaXRlQ2FzZUZsYWdGaWVsZENvbXBvbmVudCA6IFJlYWRDYXNlRmxhZ0ZpZWxkQ29tcG9uZW50O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFVuc3VwcG9ydGVkRmllbGRDb21wb25lbnQ7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRDb21wb25lbnRMYXVuY2hlckNvbXBvbmVudChjYXNlRmllbGQ6IENhc2VGaWVsZCwgd3JpdGU6IGJvb2xlYW4pOiBhbnkge1xuICAgIC8vIEV4dHJhY3QgdGhlIHZhbHVlIHBhc3NlZCBmb3IgI0FSR1VNRU5UKC4uLikgaW4gdGhlIENhc2VGaWVsZCBkaXNwbGF5X2NvbnRleHRfcGFyYW1ldGVyIGFuZFxuICAgIC8vIGRlbGV0ZSB0aGUgZGVmYXVsdCBlbnRyaWVzIGFuZCByZXR1cm4gdGhlIG1hdGNoaW5nIGNvbXBvbmVudCBmcm9tIHRoZSBjb21wb25lbnRMYXVuY2hlclJlZ2lzdHJ5XG4gICAgY29uc3QgYXJndW1lbnRWYWx1ZSA9IGNhc2VGaWVsZD8uZGlzcGxheV9jb250ZXh0X3BhcmFtZXRlcj8ubWF0Y2goLyNBUkdVTUVOVFxcKCguKj8pXFwpLylbMV07XG4gICAgaWYgKGFyZ3VtZW50VmFsdWUpIHtcbiAgICAgIGNvbnN0IGRpc3BsYXlDb250ZXh0UGFyYW1ldGVyQXJyYXkgPSBhcmd1bWVudFZhbHVlLmluY2x1ZGVzKCcsJykgPyBhcmd1bWVudFZhbHVlLnNwbGl0KCcsJykgOiBbYXJndW1lbnRWYWx1ZV07XG4gICAgICBjb25zdCBjb21wb25lbnRUb1JlbmRlciA9IGRpc3BsYXlDb250ZXh0UGFyYW1ldGVyQXJyYXkuZmlsdGVyKGRpc3BsYXlDb250ZXh0UGFyYW1ldGVyID0+IHtcbiAgICAgICAgcmV0dXJuICFPYmplY3QudmFsdWVzKERpc3BsYXlDb250ZXh0UGFyYW1ldGVyKS5maW5kKGRpc3BsYXlDb250ZXh0UGFyYW1ldGVyRnJvbUxvb2t1cCA9PiB7XG4gICAgICAgICAgIHJldHVybiBkaXNwbGF5Q29udGV4dFBhcmFtZXRlciA9PT0gZGlzcGxheUNvbnRleHRQYXJhbWV0ZXJGcm9tTG9va3VwO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKGNvbXBvbmVudFRvUmVuZGVyPy5sZW5ndGggPiAwICYmIHRoaXMuY29tcG9uZW50TGF1bmNoZXJSZWdpc3RyeS5oYXNPd25Qcm9wZXJ0eShjb21wb25lbnRUb1JlbmRlclswXSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50TGF1bmNoZXJSZWdpc3RyeVtjb21wb25lbnRUb1JlbmRlclswXV1bd3JpdGUgPyAwIDogMV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBVbnN1cHBvcnRlZEZpZWxkQ29tcG9uZW50O1xuICB9XG59XG4iXX0=