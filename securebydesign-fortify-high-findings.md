# Secure-by-Design Plan: Fortify HIGH remediation and report archiving

This Secure-by-Design plan follows `../.agent/SECURE.md` and covers remediation of Fortify HIGH findings plus capturing Fortify scan reports in Jenkins artifacts for rpx-xui-webapp.

## Purpose

Ensure Fortify scans for rpx-xui-webapp complete without HIGH severity issues while preserving secure handling of scan outputs and code changes, and ensure Fortify report artifacts are reliably archived in Jenkins for audit.

## Data and Secrets Handling

Fortify credentials remain in Azure Key Vault via the pipeline. No secrets are added to the repo. Any fixes avoid hard-coded secrets, maintain environment variable usage, and keep logs free of sensitive values.

## Logging and Artifacts

Fortify reports are generated by the Fortify client and archived by Jenkins. The pipeline copies the report into a workspace path that matches artifact collection, without printing report contents in logs. Reports are treated as sensitive code-security artifacts and only stored in CI artifacts.

## Network and Environment Safety

Changes do not introduce new network calls. The Fortify client continues to run in CI with existing configuration and vault credentials. Local runs require approved Fortify credentials and should be done only in approved environments.

## Threats and Mitigations

- Secret leakage: avoid echoing environment variables or report contents; keep copying steps file-only.
- Over-broad scans or missing coverage: keep Fortify scan scope unchanged; do not alter source scan roots in the Gradle task.
- Supply-chain changes: do not change dependencies unless required by a specific finding; document any changes in the ExecPlan.

## Validation

Run the nightly pipeline or `yarn fortifyScan` in CI. Confirm the Fortify report is archived and the scan no longer fails for HIGH findings.

## Decision Log

- Decision: Copy Fortify report outputs into workspace root for artifact collection instead of changing Fortify scan working directory.
  Rationale: Avoids changing scan scope while satisfying Jenkins artifact patterns.
  Date/Author: 2026-01-14 / Codex.

## Progress Notes

- 2026-01-14: Secure-by-Design plan created for Fortify remediation and report archiving.
- 2026-01-14: Jenkinsfile nightly stage updated to copy Fortify reports into the workspace root for safe archiving.
